/// <reference path='_all.ts' />
var todos;
(function (todos) {
    var TodoItem = (function () {
        function TodoItem(title, completed) {
            this.title = title;
            this.completed = completed;
        }
        return TodoItem;
    })();
    todos.TodoItem = TodoItem;
})(todos || (todos = {}));
///<reference path='_all.ts' />
/// <reference path='_all.ts' />
var todos;
(function (todos_1) {
    'use strict';
    var TodoStorage = (function () {
        function TodoStorage() {
            this.STORAGE_ID = 'todos-angularjs-typescript';
        }
        TodoStorage.prototype.get = function () {
            return JSON.parse(localStorage.getItem(this.STORAGE_ID) || '[]');
        };
        TodoStorage.prototype.put = function (todos) {
            localStorage.setItem(this.STORAGE_ID, JSON.stringify(todos));
        };
        return TodoStorage;
    })();
    todos_1.TodoStorage = TodoStorage;
})(todos || (todos = {}));
///<reference path='_all.ts' />
var todos;
(function (todos) {
    'use strict';
    var TodoCtrl = (function () {
        function TodoCtrl($scope, $location, filterFilter) {
            var _this = this;
            this.$scope = $scope;
            this.$location = $location;
            this.filterFilter = filterFilter;
            this.todos = $scope.todos = [
                {
                    title: 'test001',
                    completed: false
                },
                {
                    title: 'test002',
                    completed: true
                }
            ];
            $scope.newTodo = '';
            $scope.editTodo = null;
            $scope.vm = this;
            $scope.$watch('todos', function () { return _this.onTodos(); }, true);
            $scope.$watch(function () { return $location.path(); }, function (path) { return _this.onPath(path); });
            if ($location.path() === '')
                $location.path('/');
            $scope.location = $location;
        }
        TodoCtrl.prototype.onPath = function (path) {
            console.log(path);
            this.$scope.statusFilter = (path === '/active') ? { completed: false } : (path === 'completed') ? { completed: true } : null;
        };
        TodoCtrl.prototype.onTodos = function () {
            this.$scope.remainingCount = this.filterFilter(this.todos, { completed: false }).length;
        };
        TodoCtrl.prototype.addTodo = function () {
            var newTodo = this.$scope.newTodo.trim();
            if (!newTodo) {
                return;
            }
            this.todos.push({ title: newTodo, completed: false });
            this.$scope.newTodo = '';
        };
        TodoCtrl.prototype.removeTodo = function (todo) {
            this.todos.splice(this.todos.indexOf(todo), 1);
        };
        TodoCtrl.prototype.editTodo = function (todo) {
            this.$scope.editTodo = todo;
        };
        TodoCtrl.prototype.doneEditTodo = function (todo) {
            this.$scope.editTodo = null;
            todo.title = todo.title.trim();
            if (!todo.title) {
                this.removeTodo(todo);
            }
        };
        TodoCtrl.prototype.checkAll = function () {
            this.$scope.todos.forEach(function (todo) {
                console.log(todo);
                todo.completed = true;
            });
        };
        TodoCtrl.$inject = [
            '$scope',
            '$location',
            'filterFilter'
        ];
        return TodoCtrl;
    })();
    todos.TodoCtrl = TodoCtrl;
})(todos || (todos = {}));
/// <reference path='_all.ts' />
var todos;
(function (todos) {
    'use strict';
    var todomvc = angular.module('todomvc', [])
        .controller('todoCtr', todos.TodoCtrl);
})(todos || (todos = {}));
/// <reference path='typings/jquery/jquery.d.ts' />
/// <reference path='typings/angularjs/angular.d.ts' />
/// <reference path='model.ts' />
/// <reference path='interfaces.ts' />
/// <reference path='TodoStorage.ts' />
/// <reference path='todoCtrl.ts' />
/// <reference path='application.ts' />

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsLnRzIiwiaW50ZXJmYWNlcy50cyIsIlRvZG9TdG9yYWdlLnRzIiwidG9kb0N0cmwudHMiLCJhcHBsaWNhdGlvbi50cyIsIl9hbGwudHMiXSwibmFtZXMiOlsidG9kb3MiLCJ0b2Rvcy5Ub2RvSXRlbSIsInRvZG9zLlRvZG9JdGVtLmNvbnN0cnVjdG9yIiwidG9kb3MuVG9kb1N0b3JhZ2UiLCJ0b2Rvcy5Ub2RvU3RvcmFnZS5jb25zdHJ1Y3RvciIsInRvZG9zLlRvZG9TdG9yYWdlLmdldCIsInRvZG9zLlRvZG9TdG9yYWdlLnB1dCIsInRvZG9zLlRvZG9DdHJsIiwidG9kb3MuVG9kb0N0cmwuY29uc3RydWN0b3IiLCJ0b2Rvcy5Ub2RvQ3RybC5vblBhdGgiLCJ0b2Rvcy5Ub2RvQ3RybC5vblRvZG9zIiwidG9kb3MuVG9kb0N0cmwuYWRkVG9kbyIsInRvZG9zLlRvZG9DdHJsLnJlbW92ZVRvZG8iLCJ0b2Rvcy5Ub2RvQ3RybC5lZGl0VG9kbyIsInRvZG9zLlRvZG9DdHJsLmRvbmVFZGl0VG9kbyIsInRvZG9zLlRvZG9DdHJsLmNoZWNrQWxsIl0sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0M7QUFFaEMsSUFBTyxLQUFLLENBT1g7QUFQRCxXQUFPLEtBQUssRUFBQyxDQUFDO0lBQ1ZBO1FBQ0lDLGtCQUNXQSxLQUFhQSxFQUNiQSxTQUFrQkE7WUFEbEJDLFVBQUtBLEdBQUxBLEtBQUtBLENBQVFBO1lBQ2JBLGNBQVNBLEdBQVRBLFNBQVNBLENBQVNBO1FBQzNCQSxDQUFDQTtRQUNQRCxlQUFDQTtJQUFEQSxDQUxBRCxBQUtDQyxJQUFBRDtJQUxZQSxjQUFRQSxXQUtwQkEsQ0FBQUE7QUFDTEEsQ0FBQ0EsRUFQTSxLQUFLLEtBQUwsS0FBSyxRQU9YO0FDVEQsK0JBQStCO0FDQS9CLGdDQUFnQztBQUVoQyxJQUFPLEtBQUssQ0FrQlg7QUFsQkQsV0FBTyxPQUFLLEVBQUMsQ0FBQztJQUNWQSxZQUFZQSxDQUFDQTtJQUtiQTtRQUFBRztZQUVJQyxlQUFVQSxH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cmVmZXJlbmNlIHBhdGg9J19hbGwudHMnIC8+XG5cbm1vZHVsZSB0b2RvcyB7XG4gICAgZXhwb3J0IGNsYXNzIFRvZG9JdGVtIHtcbiAgICAgICAgY29uc3RydWN0b3IgKFxuICAgICAgICAgICAgcHVibGljIHRpdGxlOiBzdHJpbmcsXG4gICAgICAgICAgICBwdWJsaWMgY29tcGxldGVkOiBib29sZWFuXG4gICAgICAgICl7fVxuICAgIH1cbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9J19hbGwudHMnIC8+XG5cbm1vZHVsZSB0b2RvcyB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBJVG9kb1Njb3BlIGV4dGVuZHMgbmcuSVNjb3BlIHtcbiAgICAgICAgdG9kb3M6IFRvZG9JdGVtW107XG4gICAgICAgIG5ld1RvZG86IHN0cmluZztcbiAgICAgICAgZWRpdFRvZG8gOiBUb2RvSXRlbTtcbiAgICAgICAgcmVtYWluaW5nQ291bnQ6IG51bWJlcjtcbiAgICAgICAgZG9uZUNvdW50OiBudW1iZXI7XG4gICAgICAgIGFsbENoZWNrZWQ6IGJvb2xlYW47XG4gICAgICAgIHN0YXR1c0ZpbHRlcjogeyBjb21wbGV0ZWQ6IGJvb2xlYW47IH07XG4gICAgICAgIGxvY2F0aW9uOiBuZy5JTG9jYXRpb25TZXJ2aWNlO1xuICAgICAgICB2bTogVG9kb0N0cmw7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJVG9kb1N0b3JhZ2Uge1xuICAgICAgICBnZXQgKCk6IFRvZG9JdGVtW107XG4gICAgICAgIHB1dCh0b2RvczogVG9kb0l0ZW1bXSk7XG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nX2FsbC50cycgLz5cblxubW9kdWxlIHRvZG9zIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvKipcbiAgICAgKiBTZXJ2aWNlcyB0aGF0IHBlcnNpc3RzIGFuZCByZXRyaWV2ZXMgVE9ET3MgZnJvbSBsb2NhbFN0b3JhZ2UuXG4gICAgICovXG4gICAgZXhwb3J0IGNsYXNzIFRvZG9TdG9yYWdlIGltcGxlbWVudHMgSVRvZG9TdG9yYWdlIHtcblxuICAgICAgICBTVE9SQUdFX0lEID0gJ3RvZG9zLWFuZ3VsYXJqcy10eXBlc2NyaXB0JztcblxuICAgICAgICBnZXQgKCk6IFRvZG9JdGVtW10ge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5TVE9SQUdFX0lEKSB8fCAnW10nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1dCh0b2RvczogVG9kb0l0ZW1bXSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5TVE9SQUdFX0lELCBKU09OLnN0cmluZ2lmeSh0b2RvcykpO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nX2FsbC50cycgLz5cblxubW9kdWxlIHRvZG9zIHtcblxuICAgICd1c2Ugc3RyaWN0JztcbiAgICBleHBvcnQgY2xhc3MgVG9kb0N0cmwge1xuICAgICAgICBwcml2YXRlIHRvZG9zOiBUb2RvSXRlbVtdO1xuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgJGluamVjdCA9IFtcbiAgICAgICAgICAgICckc2NvcGUnLFxuICAgICAgICAgICAgJyRsb2NhdGlvbicsXG4gICAgICAgICAgICAnZmlsdGVyRmlsdGVyJ1xuICAgICAgICBdO1xuICAgICAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgICAgIHByaXZhdGUgJHNjb3BlOiBJVG9kb1Njb3BlLFxuICAgICAgICAgICAgcHJpdmF0ZSAkbG9jYXRpb246IG5nLklMb2NhdGlvblNlcnZpY2UsXG4gICAgICAgICAgICBwcml2YXRlIGZpbHRlckZpbHRlclxuICAgICAgICAgICAgKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZG9zID0gJHNjb3BlLnRvZG9zID0gW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3Rlc3QwMDEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3Rlc3QwMDInLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLm5ld1RvZG8gPSAnJztcbiAgICAgICAgICAgICAgICAkc2NvcGUuZWRpdFRvZG8gPSBudWxsO1xuICAgICAgICAgICAgICAgICRzY29wZS52bSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuJHdhdGNoKCd0b2RvcycsKCkgPT4gdGhpcy5vblRvZG9zKCksdHJ1ZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgoKT0+ICRsb2NhdGlvbi5wYXRoKCkscGF0aCA9PiB0aGlzLm9uUGF0aChwYXRoKSk7XG4gICAgICAgICAgICAgICAgaWYoJGxvY2F0aW9uLnBhdGgoKSA9PT0gJycpICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxvY2F0aW9uID0gJGxvY2F0aW9uO1xuXG4gICAgICAgIH1cbiAgICAgICAgb25QYXRoKHBhdGg6c3RyaW5nKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwYXRoKTtcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLnN0YXR1c0ZpbHRlciA9IChwYXRoID09PSAnL2FjdGl2ZScpID8ge2NvbXBsZXRlZDpmYWxzZX0gOiAocGF0aCA9PT0gJ2NvbXBsZXRlZCcpPyB7Y29tcGxldGVkOiB0cnVlfSA6IG51bGw7XG5cbiAgICAgICAgfVxuICAgICAgICBvblRvZG9zKCkge1xuICAgICAgICAgICAgdGhpcy4kc2NvcGUucmVtYWluaW5nQ291bnQgPSB0aGlzLmZpbHRlckZpbHRlcih0aGlzLnRvZG9zLHtjb21wbGV0ZWQ6IGZhbHNlfSkubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGFkZFRvZG8oKSB7XG4gICAgICAgICAgICB2YXIgbmV3VG9kbzpzdHJpbmcgPSB0aGlzLiRzY29wZS5uZXdUb2RvLnRyaW0oKTtcblxuICAgICAgICAgICAgaWYoIW5ld1RvZG8pe1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudG9kb3MucHVzaCh7dGl0bGU6bmV3VG9kbyxjb21wbGV0ZWQ6ZmFsc2V9KTtcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLm5ld1RvZG8gPSAnJztcbiAgICAgICAgfVxuICAgICAgICByZW1vdmVUb2RvKHRvZG86IFRvZG9JdGVtICkgIHtcbiAgICAgICAgICAgIHRoaXMudG9kb3Muc3BsaWNlKHRoaXMudG9kb3MuaW5kZXhPZih0b2RvKSwxKTtcbiAgICAgICAgfVxuICAgICAgICBlZGl0VG9kbyh0b2RvOiBUb2RvSXRlbSkge1xuICAgICAgICAgICAgdGhpcy4kc2NvcGUuZWRpdFRvZG8gPSB0b2RvO1xuICAgICAgICB9XG4gICAgICAgIGRvbmVFZGl0VG9kbyh0b2RvOlRvZG9JdGVtKXtcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLmVkaXRUb2RvID0gbnVsbDtcbiAgICAgICAgICAgIHRvZG8udGl0bGUgPSB0b2RvLnRpdGxlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmKCF0b2RvLnRpdGxlKXtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZVRvZG8odG9kbyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hlY2tBbGwoKSB7XG4gICAgICAgICAgICB0aGlzLiRzY29wZS50b2Rvcy5mb3JFYWNoKHRvZG8gPT57IFxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRvZG8pO1xuICAgICAgICAgICAgICAgIHRvZG8uY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nX2FsbC50cycgLz5cblxubW9kdWxlIHRvZG9zIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgdG9kb212YyA9IGFuZ3VsYXIubW9kdWxlKCd0b2RvbXZjJyxbXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3RvZG9DdHInLFRvZG9DdHJsKVxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9J3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzJyAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD0ndHlwaW5ncy9hbmd1bGFyanMvYW5ndWxhci5kLnRzJyAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nbW9kZWwudHMnIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPSdpbnRlcmZhY2VzLnRzJyAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nVG9kb1N0b3JhZ2UudHMnIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPSd0b2RvQ3RybC50cycgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9J2FwcGxpY2F0aW9uLnRzJyAvPlxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=